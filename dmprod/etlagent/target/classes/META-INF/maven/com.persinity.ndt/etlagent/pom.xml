<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>com.persinity.ndt</groupId>
		<artifactId>dmprod</artifactId>
		<version>0.0.1-SNAPSHOT</version>
	</parent>

	<artifactId>etlagent</artifactId>
	<packaging>jar</packaging>

	<name>etlagent</name>
	<url>http://maven.apache.org</url>


	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.0</version>
				<configuration>
					<source>${maven.compiler.source}</source>
					<target>${maven.compiler.target}</target>
				</configuration>
			</plugin>
			<!-- TODO Uncomment and adjust to encrypt code in production -->
			<!-- <plugin>
				<groupId>com.github.wvengen</groupId>
				<artifactId>proguard-maven-plugin</artifactId>
				<version>2.0.6</version>
				<dependencies>
					<dependency>
						<groupId>net.sf.proguard</groupId>
						<artifactId>proguard-base</artifactId>
						<version>4.10</version>
					</dependency>
				</dependencies>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>proguard</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<proguardVersion>4.10</proguardVersion>
					<options>
						<option>-keep public class com.persinity.ndt.* { public *; public static *; }</option>
						<option>-keep public class com.persinity.ndt.demo.NdtUpgradeDemo{public static void main(java.lang.String[]);}</option>
					</options>
					<libs>
						<lib>${java.home}/lib/rt.jar</lib>
						<lib>${java.home}/lib/jce.jar</lib>
					</libs>
				</configuration>
			</plugin> -->
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>cobertura-maven-plugin</artifactId>
				<version>2.7</version>
				<configuration>
					<check>
						<haltOnFailure>true</haltOnFailure>
						<!-- Project-wide thresholds -->
						<totalLineRate>0</totalLineRate> <!-- TODO fix when is implemented with tests -->
						<!-- 50% comes from not covering the income assertions. The latter are trivial and may not be covered by designated tests.
							 The income assertions either fail or pass, cutting the number of code branches by half.
							 On the other hand if we skip some other path that starts after the income assertions, then this rate should catch it. -->
						<totalBranchRate>0</totalBranchRate>
					</check>
					<formats>
						<format>html</format>
					</formats>
					<instrumentation>
						<excludes>
						</excludes>
					</instrumentation>
				</configuration>
				<executions>
					<execution>
						<phase>verify</phase>
						<goals>
							<goal>clean</goal>
							<!-- Generate reporting as part of the verify phase -->
							<goal>cobertura</goal>
							<goal>check</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>2.16</version>
				<dependencies>
				 <dependency>
					 <groupId>org.apache.maven.surefire</groupId>
					 <artifactId>surefire-junit47</artifactId>
					 <version>2.16</version>
				 </dependency>
				</dependencies>
				<configuration>
					<includes>
						<!-- Include only unit tests -->
						<include>**/*Test.class</include>
					</includes>
				</configuration>
			</plugin>
		</plugins>
	</build>


	<dependencies>
		<dependency>
			<groupId>com.persinity.ndt</groupId>
			<artifactId>common</artifactId>
			<version>0.0.1-SNAPSHOT</version>
		</dependency>
		<dependency>
			<groupId>com.persinity.ndt</groupId>
			<artifactId>haka</artifactId>
			<version>0.0.1-SNAPSHOT</version>
		</dependency>
		<dependency>
			<groupId>com.persinity.ndt</groupId>
			<artifactId>dbagent</artifactId>
			<version>0.0.1-SNAPSHOT</version>
		</dependency>
	</dependencies>

</project>
